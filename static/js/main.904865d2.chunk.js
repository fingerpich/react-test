(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{155:function(e,t,n){e.exports=n(298)},160:function(e,t,n){},165:function(e,t,n){},298:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),o=n.n(i),c=(n(160),n(27)),s=n(304),l=n(41),u=n(305),m=n(309),h={user:null},p=n(28),f=function(){if(window.localStorage){var e=window.localStorage.getItem("userInfo");if(e)return JSON.parse(e)}}(),d={isAuthenticated:!!f,userInfo:f||{},error:""},g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",a=arguments.length>3?arguments[3]:void 0;!function(e){window.localStorage&&window.localStorage.setItem("userInfo",JSON.stringify(e))}(t),setTimeout(function(){a.push(n)},10);var r=Object(p.a)({},e);return r.isAuthenticated=!0,r.userInfo=t,r},b=function(e,t){var n=Object(p.a)({},e);return n.isAuthenticated=!1,n.error=t.message,n},E=function(e){var t=Object(p.a)({},e);return t.isAuthenticated=!1,t.error="",t.userInfo={},t},O={posts:[],isFetching:!1,errorFetching:null},S=function(e){return Object(p.a)({},e,{isFetching:!0,errorFetching:null})},v=function(e,t){return Object(p.a)({},e,{posts:t,isFetching:!1})},j=function(e,t){return Object(p.a)({},e,{errorFetching:t,isFetching:!1})},y={posts:[],isFetching:!1,errorFetching:null},w=n(134),C=n(77),N=n(302),I=n(154),k=n(153),_=function(e){return{type:"FAILED_SIGN_IN",error:e}},T="https://jsonplaceholder.typicode.com/",F=function(e){return{type:"FAILED_FETCH_POSTS",error:e}},x=Object(u.a)(function(e,t,n){var a=n.getJSON;return e.pipe(Object(k.a)("REQUEST_SIGN_IN"),Object(w.a)(function(e){return a(T+"users?email="+e.email).pipe(Object(C.a)(function(t){return t&&t.length?function(e,t,n){return{type:"SUCCESS_SIGN_IN",userInfo:e,from:t,history:n}}(t[0],e.from,e.history):_({message:"Email is wrong"})}),Object(N.a)(function(e){return Object(I.a)(_(e))}))}))},function(e,t,n){var a=n.getJSON;return e.pipe(Object(k.a)("REQUEST_FETCH_POSTS"),Object(w.a)(function(e){return a(T+"posts?userId="+t.value.auth.userInfo.id).pipe(Object(C.a)(function(e){return e&&e.length?function(e){return{type:"SUCCESS_FETCH_POSTS",postList:e}}(e):F({message:"list is empty"})}),Object(N.a)(function(e){return Object(I.a)(F(e))}))}))}),L=Object(l.c)({header:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return(arguments.length>1?arguments[1]:void 0).type,e},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUCCESS_SIGN_IN":return g(e,t.userInfo,t.from,t.history);case"FAILED_SIGN_IN":return b(e,t.error);case"SIGNOUT_USER":return E();default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_FETCH_POSTS":return S(e);case"SUCCESS_FETCH_POSTS":return v(e,t.postList);case"FAILED_FETCH_POSTS":return j(e,t.error);default:return e}},albums:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return(arguments.length>1?arguments[1]:void 0).type,e}}),A=Object(s.a)({dependencies:{getJSON:m.a.getJSON}}),D=Object(l.d)(L,Object(l.a)(A));A.run(x);var P=D,U=n(34),G=n(35),R=n(37),H=n(36),J=n(38),B=n(307),W=n(310),Q=n(306),z=n(136),M=(n(165),n(135)),K=function(e){return e.auth&&e.auth.isAuthenticated},$=function(e){return e.auth.error},q=function(e){return e.auth&&e.auth.userInfo.email},V=Object(c.b)(function(e){return{isAuthenticated:K(e)}})(function(e){var t=e.component,n=e.isAuthenticated,a=Object(M.a)(e,["component","isAuthenticated"]);return r.a.createElement(z.a,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(Q.a,{to:{pathname:"/login",from:e.location}})}}))}),X=function(e){return e.posts.posts},Y=function(e){return e.posts.isFetching},Z=function(e){return e.posts.errorFetching},ee=n(137),te=n.n(ee),ne=n(85),ae=n.n(ne),re=n(50),ie=n(87),oe=n.n(ie),ce=n(86),se=n.n(ce),le=n(30),ue=n.n(le),me=n(29),he=n.n(me),pe=Object(re.withStyles)(function(e){return{card:{maxWidth:300,margin:e.spacing.unit},media:{height:140}}})(function(e){var t=e.classes,n=e.title,a=e.body;return r.a.createElement(ae.a,{className:t.card},r.a.createElement(se.a,null,r.a.createElement(he.a,{gutterBottom:!0,variant:"h5",component:"h2"},n),r.a.createElement(he.a,{component:"p"},a)),r.a.createElement(oe.a,null,r.a.createElement(ue.a,{size:"small",color:"primary"},"Share"),r.a.createElement(ue.a,{size:"small",color:"primary"},"Learn More")))}),fe=function(e){function t(){return Object(U.a)(this,t),Object(R.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(G.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPosts()}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement("h3",{className:e.title},"POSTS"),this.props.isLoading?r.a.createElement(te.a,null):this.props.error?r.a.createElement("div",{className:e.error},this.props.error):r.a.createElement("div",{className:e.postList},this.props.posts.map(function(t){return r.a.createElement(pe,Object.assign({className:e.post,key:t.id},t))})))}}]),t}(a.Component),de=Object(re.withStyles)(function(e){return{postList:{maxWidth:1e3,margin:"auto",display:"flex",justifyContent:"center",alignItems:"inherit",flexWrap:"wrap"},title:{textAlign:"center"},error:{color:"red"}}})(fe),ge=Object(c.b)(function(e,t){return{posts:X(e),isLoading:Y(e),error:Z(e)}},function(e,t){return{fetchPosts:function(){return e({type:"REQUEST_FETCH_POSTS",userId:t});var t}}})(de),be=n(23),Ee=n(142),Oe=n.n(Ee),Se=n(138),ve=n.n(Se),je=n(140),ye=n.n(je),we=n(139),Ce=n.n(we),Ne=n(143),Ie=n.n(Ne),ke=n(144),_e=n.n(ke),Te=n(141),Fe=n.n(Te),xe=function(e){function t(e){var n;return Object(U.a)(this,t),(n=Object(R.a)(this,Object(H.a)(t).call(this,e))).handleCloseSnack=function(e,t){"clickaway"!==t&&n.setState({openSnack:!1})},n.state={user:{email:"Sincere@april.biz"},submitted:!1,openSnack:!1},n.handleChange=n.handleChange.bind(Object(be.a)(Object(be.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(be.a)(Object(be.a)(n))),n}return Object(J.a)(t,e),Object(G.a)(t,[{key:"handleChange",value:function(e){var t=this.state.user,n=e.target.value;this.setState({user:Object(p.a)({},t,{email:n})})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state.user;this.props.signIn(t)}},{key:"componentWillReceiveProps",value:function(e){e.error&&this.setState({openSnack:!0,submitted:!1})}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.flexCenter},r.a.createElement(ae.a,{className:e.card},r.a.createElement(se.a,null,r.a.createElement(he.a,{className:e.title,color:"textSecondary",gutterBottom:!0},"Login"),r.a.createElement("div",null,r.a.createElement(ve.a,{className:e.formControl},r.a.createElement(Ce.a,{htmlFor:"component-simple"},"Name"),r.a.createElement(ye.a,{className:"email",id:"component-simple",value:this.state.user.email,onChange:this.handleChange})))),r.a.createElement(oe.a,null,r.a.createElement(ue.a,{disabled:this.state.submitted,variant:"contained",color:"primary",className:e.button,onClick:this.handleSubmit},"Login",this.state.submitted?r.a.createElement(Fe.a,{className:e.progress}):r.a.createElement(Oe.a,null)))),r.a.createElement(Ie.a,{open:this.state.openSnack,onClose:this.handleCloseSnack.bind(this),ContentProps:{"aria-describedby":"message-id"},autoHideDuration:3e3,message:r.a.createElement("span",{id:"message-id"},r.a.createElement(_e.a,null),this.props.error)}))}}]),t}(a.Component),Le=Object(re.withStyles)(function(e){return{button:{margin:e.spacing.unit},formControl:{margin:e.spacing.unit,width:"100%"},title:{},card:{width:300,margin:"auto"},progress:{},flexCenter:{display:"flex",position:"fixed",alignItems:"center",height:"100%",width:"100%",justifyContent:"center"}}})(xe),Ae=Object(c.b)(function(e,t){return{error:$(e)}},function(e,t){return{signIn:function(n){return e((a=n.email,r=t.from,i=t.history,{type:"REQUEST_SIGN_IN",email:a,from:r,history:i}));var a,r,i}}})(Le),De=function(e){return e.header.menu},Pe=n(67),Ue=n(303),Ge=n(146),Re=n.n(Ge),He=n(147),Je=n.n(He),Be=n(148),We=n.n(Be),Qe=n(149),ze=n.n(Qe),Me=n(104),Ke=n.n(Me),$e=n(150),qe=n.n($e),Ve=n(145),Xe=n.n(Ve),Ye=n(105),Ze=n.n(Ye),et=n(106),tt=n.n(et),nt=n(308),at=function(e){function t(e){var n;return Object(U.a)(this,t),(n=Object(R.a)(this,Object(H.a)(t).call(this,e))).toggleDrawer=function(e,t){return function(){n.setState(Object(Pe.a)({},e,t))}},n.state={left:!1},n.signout=n.signout.bind(Object(be.a)(Object(be.a)(n))),n}return Object(J.a)(t,e),Object(G.a)(t,[{key:"signout",value:function(){var e=this;this.props.signout(),setTimeout(function(){e.props.history.push("/")},1e3)}},{key:"render",value:function(){if(!this.props.user)return null;var e=this.props.classes,t=r.a.createElement("div",{className:e.list},r.a.createElement(Ke.a,null,["Posts","Albums"].map(function(e,t){return r.a.createElement(Ze.a,{button:!0,key:e},r.a.createElement(nt.a,{to:"/"+e},r.a.createElement(tt.a,{primary:e})))})),r.a.createElement(Xe.a,null),r.a.createElement(Ke.a,null,r.a.createElement(Ze.a,{button:!0,onClick:this.signout},r.a.createElement(tt.a,{primary:"Sign out"}))));return r.a.createElement("div",{className:e.root},r.a.createElement(Re.a,{position:"static"},r.a.createElement(Je.a,null,r.a.createElement(We.a,{onClick:this.toggleDrawer("left",!0),className:e.menuButton,color:"inherit","aria-label":"Menu"},r.a.createElement(ze.a,null)),r.a.createElement(he.a,{variant:"h6",color:"inherit",className:e.grow},this.props.user),r.a.createElement("div",null,r.a.createElement(nt.a,{to:"/albums",className:e.link,activeClassName:e.activeLink},r.a.createElement(ue.a,{color:"inherit"},"Albums")),r.a.createElement(nt.a,{to:"/posts",className:e.links,activeClassName:e.activeLink},r.a.createElement(ue.a,{color:"inherit"},"Posts")))),r.a.createElement(qe.a,{open:this.state.left,onClose:this.toggleDrawer("left",!1)},r.a.createElement("div",{tabIndex:0,role:"button",onClick:this.toggleDrawer("left",!1),onKeyDown:this.toggleDrawer("left",!1)},t))))}}]),t}(a.Component),rt=Object(re.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},link:{color:"white"},activeLink:{color:"yellow",textDecoration:"none"},list:{width:250},fullList:{width:"auto"}})(Object(Ue.a)(at)),it=Object(c.b)(function(e,t){return{menu:De(e),user:q(e)}},function(e,t){return{signout:function(){return e({type:"SIGNOUT_USER"})}}})(rt),ot=function(e){function t(){return Object(U.a)(this,t),Object(R.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return r.a.createElement(B.a,null,r.a.createElement("div",null,r.a.createElement(it,null),r.a.createElement("main",null,r.a.createElement(W.a,null,r.a.createElement(Q.a,{exact:!0,path:"/",to:"/posts"}),r.a.createElement(z.a,{exact:!0,path:"/login",component:Ae}),r.a.createElement(V,{exact:!0,path:"/posts",component:ge}),r.a.createElement(Q.a,{to:"/posts"})))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,{store:P},r.a.createElement(ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[155,1,2]]]);
//# sourceMappingURL=main.904865d2.chunk.js.map